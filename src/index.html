<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeStories - Connexion Collaborative</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="public/css/onboarding.css" />
</head>
<body>
    <div class="onboarding-container">
        <div class="header">
            <h1>ğŸ”— LifeStories</h1>
            <p>Connexion collaborative pour explorer les parcours de vie</p>
        </div>

        <div class="connection-status">
            <div id="status-indicator" class="status offline"></div>
            <span id="status-text">Hors ligne</span>
        </div>

        <div class="connection-modes">
            <div class="mode-card">
                <h3>ğŸ‘¤ Mode HÃ´te</h3>
                <p>CrÃ©ez une session et partagez le code de connexion</p>
                <button id="btn0" class="primary-btn">CrÃ©er une session</button>
            </div>
            
            <div class="mode-card">
                <h3>ğŸ¤ Mode InvitÃ©</h3>
                <p>Rejoignez une session existante</p>
                <button id="scanBtn" class="scan-btn">ğŸ“· Scanner QR Code</button>
                <div class="manual-input">
                    <textarea id="connectionInput" placeholder="Ou collez le code de connexion ici..."></textarea>
                    <button id="btn1" class="secondary-btn" disabled>Se connecter</button>
                </div>
            </div>
        </div>
        </div>

        <div class="connection-details hidden" id="connectionDetails">
            <div class="qr-section">
                <h3>Code de connexion</h3>
                <canvas id="qrCanvas"></canvas>
                <textarea id="connectionCode" readonly placeholder="Le code de connexion apparaÃ®tra ici..."></textarea>
                <button id="copyBtn" class="copy-btn">ğŸ“‹ Copier</button>
            </div>
            
            <div class="response-section hidden" id="responseSection">
                <h3>En attente de la rÃ©ponse de l'invitÃ©...</h3>
                <p>Une fois que l'invitÃ© a scannÃ© votre code, scannez sa rÃ©ponse :</p>
                <button id="scanResponseBtn" class="scan-btn">ğŸ“· Scanner la rÃ©ponse</button>
                <div class="manual-input">
                    <textarea id="responseInput" placeholder="Ou collez la rÃ©ponse ici..."></textarea>
                    <button id="processResponseBtn" class="secondary-btn" disabled>Traiter la rÃ©ponse</button>
                </div>
            </div>
        </div>

        <div class="status-section">
            <div id="statusMessage" class="status-message"></div>
            <div class="progress-bar hidden" id="progressBar">
                <div class="progress-fill"></div>
            </div>
        </div>

        <div class="actions hidden" id="connectedActions">
            <h3>âœ… Connexion Ã©tablie !</h3>
            <p>Vous pouvez maintenant commencer votre session collaborative</p>
            <button id="startApp" class="start-btn">ğŸš€ Commencer LifeStories</button>
        </div>
    </div>

    <!-- Debug panel (hidden by default) -->
    <div class="debug-panel hidden" id="debugPanel">
        <button class="debug-toggle" onclick="document.getElementById('debugLog').classList.toggle('visible')">ğŸ›</button>
        <div id="debugLog" class="debug-log hidden"></div>
    </div>

    <script src="public/js/qrcode.min.js"></script>
    <script src="public/js/qr-gen.js"></script>
    <script src="public/js/qr-scan.js"></script>
    <script src="public/js/webrtc-onboarding.js"></script>
</body>
</html>
